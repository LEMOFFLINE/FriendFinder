# Friend Finder - 项目目标与进度跟踪

## 项目概述

**目标：** 实现一个功能完整的现代社交媒体平台，包含用户系统、好友网络、群组、帖子流、消息等核心功能。

**技术栈：**
- 前端：Next.js 15, React 18, TypeScript, Tailwind CSS
- 当前存储：LocalStorage (开发阶段)
- 未来部署：阿里云服务器 (杭州), PostgreSQL

**团队规模：** 预计 3-5 人
**项目周期：** 10 周

---

## 功能模块清单

### 1. Account System (账户系统)

#### 已完成 ✅
- [x] 用户注册 (邮箱 + 密码)
- [x] 用户登录
- [x] 用户登出
- [x] 基本个人资料 (姓名、年龄、地区、简介)
- [x] 兴趣标签选择
- [x] 个人黑名单 (Privacy & Safety 页面)

#### 待完成 ❌
- [ ] 关闭/删除账号功能
- [ ] 账号数据导出
- [ ] 密码重置/找回
- [ ] 邮箱验证
- [ ] 双因素认证 (2FA, 可选)

**优先级：** P2 (第二优先级)
**预计工作量：** 3-4 天

---

### 2. Profile System (个人资料系统)

#### 已完成 ✅
- [x] 基本个人资料展示
- [x] 字母头像 (用户首字母)
- [x] 隐私设置入口

#### 待完成 ❌
- [ ] **头像上传** (P0)
- [ ] **背景图上传** (P1)
- [ ] 详细隐私设置
  - [ ] 谁能看我的帖子 (所有人/好友/仅自己)
  - [ ] 谁能给我发消息 (所有人/好友)
  - [ ] 好友申请是否需要确认
  - [ ] 账号可见性 (公开/私密)
- [ ] 个人资料编辑 (修改姓名、简介等)
- [ ] 个人帖子展示 (在个人资料页)

**优先级：** 头像上传 P0, 其他 P1
**预计工作量：** 5-6 天

---

### 3. Discovery System (发现系统)

#### 已完成 ✅
- [x] 发现用户 (基于共同兴趣的匹配算法)
- [x] 发现群组
- [x] 群组优先展示
- [x] 搜索功能
  - [x] 按名字搜索用户
  - [x] 按名字搜索群组
  - [x] 按标签搜索群组
- [x] 屏蔽用户/群组功能

#### 待完成 ❌
- [ ] **帖子流 (Feed) - 最重要** (P0)
- [ ] Feed 算法优化
- [ ] 热门内容推荐
- [ ] "可能认识的人"推荐
- [ ] 按地区筛选
- [ ] 按活跃度排序

**优先级：** 帖子流 P0, 其他 P1-P2
**预计工作量：** Feed 核心 2 周, 优化 1 周

---

### 4. Friend System (好友系统)

#### 已完成 ✅
- [x] 好友申请系统
  - [x] 发送好友申请 (可附带消息)
  - [x] 接受/拒绝申请
  - [x] 拉黑功能
  - [x] 7天自动过期
- [x] 通知中心 (查看好友请求)
- [x] 好友列表 (Contacts 页面)
- [x] 删除好友

#### 待完成 ❌
- [ ] 好友昵称 (备注)
- [ ] 星标好友
- [ ] 分享联系人
- [ ] 举报功能
- [ ] 好友分组
- [ ] 共同好友显示
- [ ] 批量管理好友

**优先级：** P1
**预计工作量：** 4-5 天

---

### 5. Group System (群组系统)

#### 已完成 ✅
- [x] 创建群组
- [x] 加入/退出群组
- [x] 群组信息展示
- [x] 群组成员列表
- [x] 群组屏蔽功能
- [x] 群组聊天功能
- [x] 活动创建系统
  - [x] 活动名称、描述
  - [x] 活动日期 (开始-结束)
  - [x] 参加者上限
  - [x] 活动发起人可踢人
  - [x] 活动屏蔽名单

#### 待完成 ❌
- [ ] 群组管理员权限系统
- [ ] 成员角色 (管理员/普通成员)
- [ ] 群组公告
- [ ] 群组文件共享
- [ ] 活动提醒通知
- [ ] 活动报名审核

**优先级：** P1
**预计工作量：** 3-4 天

---

### 6. Post System (帖子系统) - 🔴 核心功能

#### 已完成 ✅
- [ ] 无 (完全未实现)

#### 待完成 ❌
- [ ] **创建帖子** (P0)
  - [ ] 文字内容
  - [ ] 图片上传 (最多 9 张)
  - [ ] 隐私设置 (所有人/仅好友)
- [ ] **帖子流 (Feed)** (P0)
  - [ ] 显示好友帖子
  - [ ] 按时间倒序
  - [ ] 分页加载
- [ ] **点赞功能** (P0)
  - [ ] 帖子点赞
  - [ ] 点赞列表
  - [ ] 点赞通知
- [ ] **评论系统** (P0)
  - [ ] 发表评论
  - [ ] 评论列表
  - [ ] 评论点赞
  - [ ] 评论回复
- [ ] 帖子详情页
- [ ] 编辑/删除帖子
- [ ] 个人资料页显示用户帖子
- [ ] 帖子分享/转发
- [ ] 保存/收藏帖子
- [ ] 标签用户 (@mention)
- [ ] 话题标签 (#hashtag)
- [ ] 帖子举报

**优先级：** P0 (最高优先级)
**预计工作量：** 核心功能 2 周, 完整功能 3-4 周

---

### 7. Messaging System (消息系统)

#### 已完成 ✅
- [x] 一对一聊天
- [x] 发送文本消息
- [x] 消息时间戳
- [x] 群组聊天
- [x] 未读消息数量角标

#### 待完成 ❌
- [ ] 消息已读/未读状态
- [ ] 正在输入提示
- [ ] 发送图片
- [ ] 发送表情包
- [ ] 消息撤回
- [ ] 消息转发
- [ ] 语音消息 (可选)
- [ ] 视频通话 (可选, 高级功能)

**优先级：** P1
**预计工作量：** 5-6 天

---

### 8. Notification System (通知系统)

#### 已完成 ✅
- [x] 好友申请通知
- [x] 未读消息角标

#### 待完成 ❌
- [ ] **帖子互动通知** (P0)
  - [ ] 点赞通知
  - [ ] 评论通知
  - [ ] 提及通知 (@)
- [ ] 统一通知中心
- [ ] 通知分类 (好友/消息/互动)
- [ ] 通知已读/未读
- [ ] 通知设置 (哪些通知要推送)
- [ ] 浏览器推送通知 (PWA)
- [ ] 通知摘要 (批量通知)

**优先级：** P0 (帖子通知), P1 (其他)
**预计工作量：** 4-5 天

---

### 9. Media System (媒体系统)

#### 已完成 ✅
- [ ] 无 (完全未实现)

#### 待完成 ❌
- [ ] **图片上传** (P0)
  - [ ] 头像上传
  - [ ] 帖子图片上传 (多张)
  - [ ] 图片压缩
  - [ ] 图片预览
- [ ] 图片展示
  - [ ] 图片轮播 (多图帖子)
  - [ ] 点击放大查看
  - [ ] 缩略图生成
- [ ] 视频上传 (P2, 可选)
- [ ] 表情包系统 (P2)

**优先级：** 图片上传 P0, 其他 P1-P2
**预计工作量：** 核心功能 1 周, 完整功能 2 周

---

### 10. Search System (搜索系统)

#### 已完成 ✅
- [x] 搜索用户 (按名字)
- [x] 搜索群组 (按名字和标签)

#### 待完成 ❌
- [ ] **搜索帖子** (P1)
- [ ] 搜索历史
- [ ] 热门搜索标签
- [ ] 搜索结果分类 (用户/群组/帖子)
- [ ] 高级搜索筛选
- [ ] 搜索建议/自动补全

**优先级：** P1
**预计工作量：** 3-4 天

---

### 11. Privacy & Safety (隐私与安全)

#### 已完成 ✅
- [x] 屏蔽用户
- [x] 屏蔽群组
- [x] 黑名单管理页面

#### 待完成 ❌
- [ ] **举报系统** (P1)
  - [ ] 举报用户
  - [ ] 举报帖子
  - [ ] 举报评论
  - [ ] 举报群组
- [ ] 隐私设置
  - [ ] 账号可见性
  - [ ] 帖子默认可见性
  - [ ] 谁能给我发消息
  - [ ] 谁能看我的好友列表
- [ ] 审核系统 (管理员功能, P2)

**优先级：** P1
**预计工作量：** 4-5 天

---

## 开发进度规划

### Phase 1: 核心社交功能 (Week 1-4) 🔴

**目标：** 实现最基本的社交媒体功能，让用户可以发帖、互动

**任务清单：**
1. **帖子系统核心** (2 周)
   - [ ] 创建帖子 (文字)
   - [ ] 帖子流展示
   - [ ] 删除帖子
   - [ ] 帖子详情页

2. **点赞和评论** (1 周)
   - [ ] 帖子点赞/取消点赞
   - [ ] 发表评论
   - [ ] 评论列表展示

3. **图片上传基础** (1 周)
   - [ ] 头像上传
   - [ ] 帖子单张图片上传
   - [ ] 图片压缩和优化

**里程碑：** 用户可以发帖、点赞、评论，查看好友动态

---

### Phase 2: 增强体验 (Week 5-7) 🟡

**目标：** 完善交互功能，提升用户体验

**任务清单：**
1. **通知系统** (1 周)
   - [ ] 点赞通知
   - [ ] 评论通知
   - [ ] 统一通知中心

2. **多图上传和展示** (3 天)
   - [ ] 帖子多图上传 (最多 9 张)
   - [ ] 图片轮播
   - [ ] 图片放大查看

3. **Feed 算法优化** (4 天)
   - [ ] 基于互动的内容排序
   - [ ] 热度计算
   - [ ] 个性化推荐

4. **完善隐私设置** (3 天)
   - [ ] 详细隐私选项
   - [ ] 帖子可见性控制

5. **举报系统** (3 天)
   - [ ] 举报用户
   - [ ] 举报帖子/评论

**里程碑：** 完整的社交互动体验，用户活跃度提升

---

### Phase 3: 高级功能 (Week 8-9) 🟢

**目标：** 添加高级功能，完善细节

**任务清单：**
1. **增强联系人功能** (4 天)
   - [ ] 好友昵称
   - [ ] 星标好友
   - [ ] 分享联系人

2. **搜索增强** (3 天)
   - [ ] 搜索帖子内容
   - [ ] 搜索历史
   - [ ] 热门标签

3. **消息系统增强** (5 天)
   - [ ] 消息已读状态
   - [ ] 正在输入提示
   - [ ] 发送图片

4. **数据架构重构** (1 周)
   - [ ] 创建统一数据访问层
   - [ ] 实现状态管理 (Context)
   - [ ] 为服务器迁移做准备

**里程碑：** 功能完善的社交平台，准备部署

---

### Phase 4: 测试和部署 (Week 10) ⚪

**目标：** 测试、修复 Bug，准备演示

**任务清单：**
1. **测试** (3 天)
   - [ ] 功能测试
   - [ ] 用户测试
   - [ ] Bug 修复

2. **部署准备** (2 天)
   - [ ] 服务器配置
   - [ ] 数据库迁移
   - [ ] 域名和 SSL

3. **文档和演示** (2 天)
   - [ ] 演示视频制作
   - [ ] 反思报告撰写
   - [ ] 项目文档整理

**里程碑：** 完成项目，准备提交

---

## 技术债务和改进计划

### 当前架构问题

1. **数据分散**
   - 问题：用户、消息、群组等数据分散在不同的 localStorage key
   - 影响：数据管理混乱，难以维护
   - 解决：创建统一的数据访问层

2. **缺少状态管理**
   - 问题：页面间数据不同步，需要刷新才能看到更新
   - 影响：用户体验差
   - 解决：使用 React Context 或 Zustand

3. **LocalStorage 限制**
   - 问题：5-10MB 存储限制，不适合存储图片
   - 影响：无法支持大量帖子和媒体
   - 解决：迁移到 IndexedDB 或服务器数据库

### 重构计划

**短期 (Week 5-6):**
- [ ] 创建 `lib/database.ts` 统一数据访问
- [ ] 实现基本的 Context 状态管理
- [ ] 添加数据验证和错误处理

**中期 (Week 8-9):**
- [ ] 迁移到 IndexedDB (支持更多数据)
- [ ] 实现数据同步机制
- [ ] 添加数据导入/导出功能

**长期 (部署后):**
- [ ] 迁移到 PostgreSQL 数据库
- [ ] 实现 WebSocket 实时通信
- [ ] 添加 Redis 缓存层

---

## 资源和工具

### 开发工具
- **代码编辑器：** VS Code
- **版本控制：** Git + GitHub
- **项目管理：** GitHub Projects / Trello
- **设计工具：** Figma (可选)
- **测试工具：** Chrome DevTools, Lighthouse

### 学习资源
- **Next.js 文档：** https://nextjs.org/docs
- **React 文档：** https://react.dev
- **Feed 算法参考：** 搜索 "social media feed algorithm"
- **图片优化：** https://web.dev/optimize-images/

### 第三方服务 (未来部署)
- **域名注册：** 阿里云/腾讯云
- **图片存储：** 阿里云 OSS / Cloudinary
- **数据库：** PostgreSQL (阿里云 RDS)
- **CDN：** 阿里云 CDN

---

## 风险和挑战

### 技术风险
1. **图片存储和加载性能**
   - 风险：图片过大导致加载缓慢
   - 缓解：实现图片压缩和懒加载

2. **Feed 算法性能**
   - 风险：用户和帖子多时计算缓慢
   - 缓解：分页加载，缓存计算结果

3. **实时通信实现**
   - 风险：WebSocket 实现复杂
   - 缓解：先用轮询，后期再优化

### 项目管理风险
1. **时间压力**
   - 风险：10 周时间紧张
   - 缓解：严格按优先级开发，砍掉非必要功能

2. **团队协作**
   - 风险：代码冲突，沟通不畅
   - 缓解：使用 Git 分支，定期会议

3. **功能范围蔓延**
   - 风险：想做太多功能
   - 缓解：坚持 MVP 原则，优先核心功能

---

## 成功标准

### MVP (最小可行产品) 标准
- [x] 用户可以注册和登录
- [ ] 用户可以发布帖子（文字+图片）
- [ ] 用户可以查看好友的帖子流
- [ ] 用户可以点赞和评论帖子
- [ ] 用户可以添加好友
- [ ] 用户可以发送消息
- [ ] 基本的隐私和安全功能

### 课程项目交付标准
- [ ] 演示视频展示核心功能
- [ ] 反思报告详细记录开发过程
- [ ] 代码库组织良好，有基本文档
- [ ] 应用可以在本地或服务器上运行
- [ ] 团队成员都有明确贡献

### 理想目标
- [ ] 完整的社交媒体功能
- [ ] 优秀的用户体验
- [ ] 部署到生产环境
- [ ] 支持多用户并发使用
- [ ] 有一定数量的测试用户

---

## 更新日志

**2025-11-10**
- 初始化项目文档
- 完成功能模块清单
- 制定 10 周开发计划

---

## 附录

### 数据模型参考

\`\`\`typescript
// User
interface User {
  id: string;
  email: string;
  name: string;
  age: number;
  location: string;
  bio: string;
  avatar?: string;
  backgroundImage?: string;
  interests: string[];
  connectedUsers: string[];
  blockedUsers: string[];
  createdAt: number;
}

// Post
interface Post {
  id: string;
  authorId: string;
  content: string;
  images: string[];
  likes: string[];
  commentCount: number;
  visibility: 'everyone' | 'friends' | 'private';
  createdAt: number;
  updatedAt: number;
}

// Comment
interface Comment {
  id: string;
  postId: string;
  authorId: string;
  content: string;
  likes: string[];
  createdAt: number;
}

// Message
interface Message {
  id: string;
  conversationId: string;
  senderId: string;
  content: string;
  type: 'text' | 'image';
  read: boolean;
  createdAt: number;
}

// Notification
interface Notification {
  id: string;
  userId: string;
  type: 'like' | 'comment' | 'friend_request' | 'message';
  actorId: string;
  postId?: string;
  read: boolean;
  createdAt: number;
}
\`\`\`

### API 端点规划 (未来服务器实现)

\`\`\`
# 用户相关
POST   /api/auth/register
POST   /api/auth/login
POST   /api/auth/logout
GET    /api/users/:id
PUT    /api/users/:id
DELETE /api/users/:id

# 帖子相关
GET    /api/posts (feed)
POST   /api/posts
GET    /api/posts/:id
PUT    /api/posts/:id
DELETE /api/posts/:id
POST   /api/posts/:id/like
POST   /api/posts/:id/comments

# 好友相关
POST   /api/friends/request
POST   /api/friends/accept
POST   /api/friends/reject
DELETE /api/friends/:id

# 消息相关
GET    /api/messages/:conversationId
POST   /api/messages
PUT    /api/messages/:id/read

# 搜索
GET    /api/search?q=:query&type=:type
